<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T2U3">speed_box</span>=findBoxspeed(<span class="var type1" id="S3T1U6">test_obtData</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">% It automatically calculates the box speed i.e target speed that lies in</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">% opto coverage.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">%INPUT test_obtData  data obtained in matrix form</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%OUTPUT speed_box  scalar variable equivalent to speed of box.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo" id="T1:U3"><span class="var type1" id="S4T1U9">optoData</span>= <span class="var type1" id="S3T1U10">test_obtData</span></span>; <span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo" id="T2:U6"><span class="var type1" id="S5T2U13">contOne</span>=<span class="mxinfo" id="T2:U8">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo" id="T1:U9"><span class="var type1" id="S6T1U17">temp</span>=<span class="mxinfo" id="T1:U11">zeros(size(<span class="var type1" id="S4T1U22">optoData</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S9T2U25">i</span>=<span class="mxinfo" id="T2:U14">1</span>:length(<span class="var type1" id="S4T1U31">optoData</span>)-1    </span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo" id="T7:U16"><span class="mxinfo" id="T2:U17"><span class="var type1" id="S4T1U38">optoData</span>(<span class="var type1" id="S9T2U39">i</span>)</span>==<span class="mxinfo" id="T2:U20">1</span></span> &amp;&amp; <span class="mxinfo" id="T7:U21"><span class="mxinfo" id="T2:U22"><span class="var type1" id="S4T1U43">optoData</span>(<span class="mxinfo" id="T2:U24"><span class="var type1" id="S9T2U45">i</span>+<span class="mxinfo" id="T2:U26">1</span></span>)</span>==<span class="mxinfo" id="T2:U27">1</span></span> <span class="comment">%Continous check</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo" id="T7:U28"><span class="var type1" id="S9T2U51">i</span>==<span class="mxinfo" id="T2:U30"><span class="mxinfo" id="T2:U31">length(<span class="var type1" id="S4T1U55">optoData</span>)</span>-<span class="mxinfo" id="T2:U33">1</span></span></span> <span class="comment">%if last element has 100           </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line">            <span class="mxinfo" id="T2:U34"><span class="var type1" id="S5T2U59">contOne</span>=<span class="mxinfo" id="T2:U36"><span class="var type1" id="S5T2U61">contOne</span>+<span class="mxinfo" id="T2:U38">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line">            <span class="mxinfo" id="T2:U39"><span class="mxinfo" id="T2:U40"><span class="var type1" id="S6T1U66">temp</span>(<span class="var type1" id="S9T2U67">i</span>)</span>=<span class="var type1" id="S5T2U68">contOne</span></span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line">            <span class="mxinfo" id="T2:U44"><span class="var type1" id="S5T2U72">contOne</span>=<span class="mxinfo" id="T2:U46"><span class="var type1" id="S5T2U74">contOne</span>+<span class="mxinfo" id="T2:U48">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line">    <span class="keyword">end</span> </span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo" id="T7:U49"><span class="var type1" id="S5T2U81">contOne</span>&gt;<span class="mxinfo" id="T2:U51">0</span></span> &amp;&amp; <span class="mxinfo" id="T7:U52"><span class="mxinfo" id="T2:U53"><span class="var type1" id="S4T1U85">optoData</span>(<span class="var type1" id="S9T2U86">i</span>)</span>==<span class="mxinfo" id="T2:U56">1</span></span> &amp;&amp; <span class="mxinfo" id="T7:U57"><span class="mxinfo" id="T2:U58"><span class="var type1" id="S4T1U90">optoData</span>(<span class="mxinfo" id="T2:U60"><span class="var type1" id="S9T2U92">i</span>+<span class="mxinfo" id="T2:U62">1</span></span>)</span>==<span class="mxinfo" id="T2:U63">0</span></span> <span class="comment">%Ending check</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line">        <span class="mxinfo" id="T2:U64"><span class="var type1" id="S5T2U97">contOne</span>=<span class="mxinfo" id="T2:U66"><span class="var type1" id="S5T2U99">contOne</span>+<span class="mxinfo" id="T2:U68">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo" id="T7:U69"><span class="var type1" id="S5T2U106">contOne</span>==<span class="mxinfo" id="T2:U71">0</span></span> &amp;&amp; <span class="mxinfo" id="T7:U72"><span class="mxinfo" id="T2:U73"><span class="var type1" id="S4T1U110">optoData</span>(<span class="var type1" id="S9T2U111">i</span>)</span>==<span class="mxinfo" id="T2:U76">1</span></span> &amp;&amp; <span class="mxinfo" id="T7:U77"><span class="mxinfo" id="T2:U78"><span class="var type1" id="S4T1U115">optoData</span>(<span class="mxinfo" id="T2:U80"><span class="var type1" id="S9T2U117">i</span>+<span class="mxinfo" id="T2:U82">1</span></span>)</span>==<span class="mxinfo" id="T2:U83">0</span></span> <span class="comment">%Just for single '1'</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line">        <span class="mxinfo" id="T2:U84"><span class="var type1" id="S5T2U122">contOne</span>=<span class="mxinfo" id="T2:U86"><span class="var type1" id="S5T2U124">contOne</span>+<span class="mxinfo" id="T2:U88">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo" id="T7:U89"><span class="var type1" id="S5T2U130">contOne</span>&gt;<span class="mxinfo" id="T2:U91">0</span></span> &amp;&amp; <span class="mxinfo" id="T7:U92"><span class="mxinfo" id="T2:U93"><span class="var type1" id="S4T1U134">optoData</span>(<span class="var type1" id="S9T2U135">i</span>)</span>==<span class="mxinfo" id="T2:U96">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line">              <span class="mxinfo" id="T2:U97"><span class="mxinfo" id="T2:U98"><span class="var type1" id="S6T1U140">temp</span>(<span class="var type1" id="S9T2U141">i</span>)</span>=<span class="var type1" id="S5T2U142">contOne</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line">        <span class="mxinfo" id="T2:U102"><span class="var type1" id="S5T2U145">contOne</span>=<span class="mxinfo" id="T2:U104">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line"><span class="mxinfo" id="T2:U105"><span class="var type1" id="S2T2U149">speed_box</span>= <span class="mxinfo" id="T2:U107">max(<span class="var type1" id="S6T1U152">temp</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
